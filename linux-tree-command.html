<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>How to Traverse a Directory Tree on Linux -</title><meta name=robots content="index,follow,noarchive"><meta name=description content="Quick LinksAll About Directories  The tree Command  Don't Parse the Output From ls to Traverse Directories  Using the find Command  Traversing Directory Trees With a Script  Recursion Is Weird   Directories on Linux let you group files in distinct, separate collections. The downside is it becomes tedious moving from directory to directory to perform a repetitive task. Here's how to automate that.
  All About Directories  The first command you learn when you're introduced to Linux is probably ls, but cd   won't be far behind it."><meta name=author content="Aldo Pusey"><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/app.css><link rel="preload stylesheet" as=style href=https://assets.cdnweb.info/hugo/paper/css/an-old-hope.min.css><script defer src=https://assets.cdnweb.info/hugo/paper/js/highlight.min.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=preload as=image href=./theme.png><link rel=icon href=./favicon.ico><link rel=apple-touch-icon href=./apple-touch-icon.png><meta name=generator content="Hugo 0.98.0"><meta property="og:title" content="How to Traverse a Directory Tree on Linux"><meta property="og:description" content="Directories on Linux let you group files in distinct, separate collections. The downside is it becomes tedious moving from directory to directory to perform a repetitive task. Here's how to automate that."><meta property="og:type" content="article"><meta property="og:url" content="/linux-tree-command.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-04-07T00:00:00+00:00"><meta property="article:modified_time" content="2024-04-07T00:00:00+00:00"><meta itemprop=name content="How to Traverse a Directory Tree on Linux"><meta itemprop=description content="Directories on Linux let you group files in distinct, separate collections. The downside is it becomes tedious moving from directory to directory to perform a repetitive task. Here's how to automate that."><meta itemprop=datePublished content="2024-04-07T00:00:00+00:00"><meta itemprop=dateModified content="2024-04-07T00:00:00+00:00"><meta itemprop=wordCount content="1793"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="How to Traverse a Directory Tree on Linux"><meta name=twitter:description content="Directories on Linux let you group files in distinct, separate collections. The downside is it becomes tedious moving from directory to directory to perform a repetitive task. Here's how to automate that."></head><body class=not-ready data-menu=true><header class=header><p class=logo><a class=site-name href=./index.html>ZenVlog</a><a class=btn-dark></a></p><script>let bodyClx=document.body.classList,btnDark=document.querySelector(".btn-dark"),sysDark=window.matchMedia("(prefers-color-scheme: dark)"),darkVal=localStorage.getItem("dark"),setDark=e=>{bodyClx[e?"add":"remove"]("dark"),localStorage.setItem("dark",e?"yes":"no")};setDark(darkVal?darkVal==="yes":sysDark.matches),requestAnimationFrame(()=>bodyClx.remove("not-ready")),btnDark.addEventListener("click",()=>setDark(!bodyClx.contains("dark"))),sysDark.addEventListener("change",e=>setDark(e.matches))</script><nav class=menu><a href=./sitemap.xml>Sitemap</a></nav></header><main class=main><article class=post-single><header class=post-title><p><time>Apr 7, 2024</time>
<span>Aldo Pusey</span></p><h1>How to Traverse a Directory Tree on Linux</h1></header><section class=post-content><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>All About Directories</a></li></ul><ul class=table-content-level-1><li><a href=#>The tree Command</a></li></ul><ul class=table-content-level-1><li><a href=#>Don't Parse the Output From ls to Traverse Directories</a></li></ul><ul class=table-content-level-1><li><a href=#>Using the find Command</a></li></ul><ul class=table-content-level-1><li><a href=#>Traversing Directory Trees With a Script</a></li></ul><ul class=table-content-level-1><li><a href=#>Recursion Is Weird</a></li></ul><p>Directories on Linux let you group files in distinct, separate collections. The downside is it becomes tedious moving from directory to directory to perform a repetitive task. Here's how to automate that.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=all-about-directories>All About Directories</h2><p>The first command you learn when you're introduced to Linux is probably <code>ls</code>, but</p><pre><code class="hljs bash"><span class=hljs-built_in>cd</span></code> </pre><p>won't be far behind it. Understanding directories and how to move around them, particularly nested subdirectories, is a fundamental part of understanding <a href=#>how Linux organizes itself</a>, and how you can organize your own work into files, directories, and subdirectories.</p><p><span class=related-single>Related: <a href=#>The Linux Directory Structure, Explained</a></span></p><p>Grasping the concept of a tree of directories---and how to move between them---is one of the many little milestones you pass as you familiarize yourself with the landscape of Linux. <a href=#>Using</a></p><pre><code class="hljs bash"><span class=hljs-built_in>cd</span></code> </pre><p>with a path takes you to that directory. Shortcuts like</p><pre><code class="hljs bash"><span class=hljs-built_in>cd</span> ~</code> </pre><p>or</p><pre><code class="hljs bash"><span class=hljs-built_in>cd</span></code> </pre><p>on its own take you back to your home directory, and</p><pre><code class="hljs bash"><span class=hljs-built_in>cd</span> ..</code> </pre><p>moves you up one level in the directory tree. Simple.</p><p>However, there isn't an equally simple means of running a command in all directories of a directory tree. There are different ways we can achieve that functionality, but there isn't a standard Linux command dedicated to that purpose.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Some commands, such as <code>ls</code>, have command-line options that force them to operate&nbsp;recursively, meaning they start in one directory and methodically work through the entire directory tree below that directory. For <code>ls</code>, it's the</p><pre><code class=hljs>-R</code> </pre><p>(recursive) option.</p><p>If you need to use a command that doesn't support recursion, you have to provide the recursive functionality yourself. Here's how to do that.</p><p><span class=related-single>Related: <a href=#>37 Important Linux Commands You Should Know</a></span></p><h2 id=the-tree-command>The tree Command</h2><p>The <code>tree</code> command won't help us with the task at hand, but it does make it easy to see the structure of a directory tree. It draws the tree in a terminal window so that we can get an instant overview of the directories and subdirectories that make up the directory tree, and their relative positions in the tree.</p><p>You'll need to install <code>tree</code> .</p><p>On Ubuntu you need to type:</p><pre>sudo apt install tree</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/1-6.png><p>On Fedora, use:</p><pre>sudo dnf install tree</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/2-5.png><p>On Manjaro, the command is:</p><pre>sudo pacman -Sy tree</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/3-6.png><p>Using <code>tree</code> with no parameters draws out the tree below the current directory.</p><pre>tree</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/4-4.png><p>You can pass a path to <code>tree</code> on the command line.</p><pre>tree work</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/5-5.png><p>The <code>-d</code> (directories) option excludes files and only shows directories.</p><pre>tree -d work</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/6-5.png><p>This is the most convenient way to get a clear view of the structure of a directory tree.&nbsp;The directory tree shown here is the one used in the following examples. There are five text files and eight directories.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=don-t-parse-the-output-from-ls-to-traverse-directories>Don't Parse the Output From ls to Traverse Directories</h2><p>Your first thought might be, if <code>ls</code> can recursively traverse a directory tree, why not use <code>ls</code> to do just that and pipe the output into some other commands that parse the directories and perform some actions?</p><p>Parsing the output of <code>ls</code> is considered bad practice. Because of the ability in Linux to create file and directory names containing all sorts of strange characters, it becomes very difficult to create a generic, universally-correct parser.</p><p>You might never knowingly create a directory name as preposterous as this, but a mistake in a script or an application might.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/7-4.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Parsing legitimate but poorly considered file and directory names is error-prone. There are other methods we can use that are safer and much more robust than relying on interpreting the output of <code>ls</code>.</p><h2 id=using-the-find-command>Using the find Command</h2><p><a href=#>The <code>find</code> command</a> has in-built recursive capabilities, and it also has the ability to run commands for us. This lets us build powerful one-liners. If it's something you're likely to want to use in the future, you can turn your one-liner into an alias or a shell function.</p><p>This command recursively loops through the directory tree, looking for directories. Each time it finds a directory it prints out the name of the directory and repeats the search inside that directory. Having completed searching one directory, it exits that directory and resumes the search in its parent directory.</p><pre>find work -type d -execdir echo "In:" {} \;</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/8-4.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>You can see by the order the directories are listed in, how the search progresses through the tree. By comparing the output from the <code>tree</code> command to the output from the <code>find</code> one-liner, you'll see how <code>find</code> searches each directory and subdirectory in turn until it hits a directory with no subdirectories. It then goes back up a level and resumes the search at that level.</p><p>Here's how the command is made up.</p><ul><li><strong>find</strong>: The <code>find</code> command.</li><li><strong>work</strong>: The directory to start the search in. This can be a path.</li><li><strong>-type d</strong>: We're looking for directories.</li><li><strong>-execdir</strong>: We're going to execute a command in each directory we find.</li><li><strong>echo "In:" {}</strong>: This is the command., We're simply echoing the name of the directory to the terminal window. The "{}" holds the name of the current directory.</li><li><strong>\;</strong>: This is a semicolon used to terminate the command. We need to escape it with the backslash so that Bash doesn't interpret it directly.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>With a slight change, we can make the find command return files that match a search clue. We need to include the -name option and a search clue. In this example, we're looking for text files that match "*.txt", and echoing their name to the terminal window.</p><pre>find work -name "*.txt" -type f -execdir echo "Found:" {} \;</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/9-4.png><p>Whether you search for files or directories depends on what you want to achieve. To run a command&nbsp;inside each directory, use <code>-type d</code> .&nbsp;To run a command on&nbsp;each matching file, use <code>-type f</code>.</p><p>This command counts the lines in all text files in the starting directory and subdirectories.</p><pre>find work -name "*.txt" -type f -execdir wc -l {} \;</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/10-4.png><p><span class=related-single>Related: <a href=#>How to Use the find Command in Linux</a></span></p><h2 id=traversing-directory-trees-with-a-script>Traversing Directory Trees With a Script</h2><p>If you need to traverse directories inside a script you could use the <code>find</code> command inside your script. If you need to---or just want to---do the recursive searches yourself, you can do that too.</p><pre>#!/bin/bash  <p>shopt -s dotglob nullglob</p>  <p>function recursive {</p>  <p> local current_dir dir_or_file</p>  <p> for current_dir in $1; do</p>  <p> echo "Directory command for:" $current_dir</p>  <p> for dir_or_file in "$current_dir"/*; do</p>  <p> if [[ -d $dir_or_file ]]; then</p>  <p> recursive "$dir_or_file"</p>  <p> else</p>  <p> wc $dir_or_file</p>  <p> fi</p>  <p> done</p>  <p> done</p>  <p>}</p>  <p>recursive "$1"</p></pre><p>Copy the text into an editor and save it as "recurse.sh", then use <a href=#>the <code>chmod</code> command</a> to make it executable.</p><pre>chmod +x recurse.sh</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/11-4.png><p>The script sets two shell options, <code>dotglob</code> and <code>nullglob</code>.</p><p>The <code>dotglob</code> setting means file and directory names that start with a period "<code>.</code>" will be returned when wildcard search terms are expanded. This effectively means we're including <a href=#>hidden files and directories</a> in our search results.</p><p>The <code>nullglob</code> setting means search patterns that don't find any results are treated as an empty or null string. They don't default to the search term itself. In other words, if we're searching for everything in a directory by using the asterisk wildcard "<code>*</code>", but there are no results we'll receive a null string instead of a string containing an asterisk. This prevents the script from inadvertently trying to open a directory called "*", or treating "*" as a file name.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Next, it defines a function called <code>recursive</code>. This is where the interesting stuff happens.</p><p>Two <a href=#>variables</a> are declared, called <code>current_dir</code> and <code>dir_or_file</code> . These are local variables, and can only be referenced within the function.</p><p>A variable called <code>$1</code> is also used within the function. This is the first (and only) parameter passed to the function when it is called.</p><p>The script uses two <a href=#><code>for</code> loops</a>, one nested inside the other. The first (outer) <code>for</code> loop is used for two things.</p><p>One is to run whatever command you want to have performed in each directory. All we're doing here is echoing the name of the directory to the terminal window. You could of course use any command or sequence of commands, or call another script function.</p><p>The second thing the outer for loop does is to check all file system objects it can find---which will be either files or directories. This is the purpose of the inner <code>for</code> loop. In turn, each file or directory name is passed into the <code>dir_or_file</code> variable.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>The <code>dir_or_file</code> variable is then tested in an if statement to see if it is a directory.</p><ul><li>If it is, the function calls itself and passes the name of the directory as a parameter.</li><li>If the <code>dir_or_file</code> variable is not a directory, then it must be a file. Any commands that you wish to have applied to the file can be called from the <code>else</code> clause of the <code>if</code> statement. You could also call another function within the same script.</li></ul><p>The final line in the script calls the <code>recursive</code> function and passes in the first&nbsp;command line&nbsp;parameter <code>$1</code> as the starting directory to search in. This is what kicks off the whole process.</p><p>Let's run the script.</p><pre>./recurse.sh work</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/12-4.png> <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>The directories are traversed, and the point in the script where a command would be run in each directory is indicated by the "Directory command for:" lines. Files that are found have the <code>wc</code> command run on them to count lines, words, and characters.</p><p>The first directory processed is "work", followed by each nested directory branch of the tree.</p><p>An interesting point to note is you can change the order that the directories are processed in, by moving the directory-specific commands from being above the inner for loop to being below it.</p><p>Let's move the "Directory command for:" line to after the <code>done</code> of the inner <code>for</code> loop.</p><pre>#!/bin/bash  <p>shopt -s dotglob nullglob</p>  <p>function recursive {</p>  <p> local current_dir dir_or_file</p>  <p> for current_dir in $1; do</p>  <p> for dir_or_file in "$current_dir"/*; do</p>  <p> if [[ -d $dir_or_file ]]; then</p>  <p> recursive "$dir_or_file"</p>  <p> else</p>  <p> wc $dir_or_file</p>  <p> fi</p>  <p> done</p>  <p> echo "Directory command for:" $current_dir</p>  <p> done</p>  <p>}</p>   <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong>  <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <p>recursive "$1"</p></pre><p>Now we'll run the script once more.</p><pre>./recurse.sh work</pre><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/06/12-3.png><p>This time the directories have the commands applied to them from the deepest levels first, working back up the branches of the tree. The directory passed as the parameter to the script is processed last.</p><p>If it is important to have deeper directories processed first, this is how you can do it.</p><h2 id=recursion-is-weird>Recursion Is Weird</h2><p>It's like calling yourself on your own phone, and leaving a message for yourself to tell yourself when you next meet you---repeatedly.</p><p>It can take some effort before you grasp its benefits, but when you do you'll see it is a programmatically elegant way to tackle hard problems.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGhvampgZ4RwuMinrLFlpKeypnnCqKSmmZ6ZfA%3D%3D</p></section><nav class=post-nav><a class=prev href=./gwen-stefani-tiny-waist-crop-top-stuns-fans.html><span>←</span><span>Gwen Stefani stuns fans with youthful appearance as she poses in tiny crop top</span></a>
<a class=next href=./how-to-wear-lingerie-as-outerwear.html><span>How to Wear Lingerie as Outerwear: 4 Outfit Ideas</span><span>→</span></a></nav></article></main><footer class=footer><p>&copy; 2024 <a href=./></a></p><p>Powered by <a href=https://gohugo.io/ rel=noopener target=_blank>Hugo️️</a>️</p></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>